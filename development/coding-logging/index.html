<!DOCTYPE html><html lang="en">

<head>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="robots" content="noindex">
  
  <title>
Logging - NHSBSA Digital, Data and Technology Playbook - NHSBSA
  </title>

    
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-NQ562NM01Z" type="text/plain" data-cookieconsent="statistics"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-NQ562NM01Z');
    </script>

  
  <link href="https://assets.nhs.uk/" rel="preconnect" crossorigin>
  <link type="font/woff2" href="https://assets.nhs.uk/fonts/FrutigerLTW01-55Roman.woff2" rel="preload" as="font" crossorigin>
  <link type="font/woff2" href="https://assets.nhs.uk/fonts/FrutigerLTW01-65Bold.woff2" rel="preload" as="font" crossorigin>

  
  <link rel="shortcut icon" href="/nhsbsa-digital-playbook/nhsuk-frontend/assets/favicons/favicon.ico?v=68c7f017cfba" type="image/x-icon">
  <link rel="apple-touch-icon" href="/nhsbsa-digital-playbook/nhsuk-frontend/assets/favicons/apple-touch-icon-180x180.png?v=15a5044def06">
  <link rel="mask-icon" href="/nhsbsa-digital-playbook/nhsuk-frontend/assets/favicons/favicon.svg" color="#005eb8">
  <link rel="icon" sizes="192x192" href="/nhsbsa-digital-playbook/nhsuk-frontend/assets/favicons/favicon-192x192.png?v=43924bfe6c7e">

  <meta name="msapplication-TileImage" content="/nhsbsa-digital-playbook/nhsuk-frontend/assets/favicons/mediumtile-144x144.png?v=cf4985872492">
  <meta name="msapplication-TileColor" content="#005eb8">
  <meta name="msapplication-square70x70logo" content="/nhsbsa-digital-playbook/nhsuk-frontend/assets/favicons/smalltile-70x70.png?v=29f75b06cf75">
  <meta name="msapplication-square150x150logo" content="/nhsbsa-digital-playbook/nhsuk-frontend/assets/favicons/mediumtile-150x150.png?v=89688d93af5b">
  <meta name="msapplication-wide310x150logo" content="/nhsbsa-digital-playbook/nhsuk-frontend/assets/favicons/widetile-310x150.png?v=535c3996630d">
  <meta name="msapplication-square310x310logo" content="/nhsbsa-digital-playbook/nhsuk-frontend/assets/favicons/largetile-310x310.png?v=294742e00ff4">

  <meta property="og:url" content="https://nhsbsa.github.io/nhsbsa-digital-playbook/development/coding-logging/">
  <meta property="og:site_name" content="nhsbsa.nhs.uk">
  <meta property="og:type" content="website">
  <meta property="og:locale" content="en_GB">
  <meta property="og:image" content="https://nhsbsa.github.io/nhsbsa-digital-playbook/images/opengraph-image.png?v=b6b84e727630">
  <meta property="og:title" content="Logging - NHSBSA Digital, Data and Technology Playbook - NHSBSA">

  <link href="/nhsbsa-digital-playbook/stylesheets/application.css?v=a812fa0873c9" media="all" rel="stylesheet" type="text/css" >

</head>

<body class="">

  <script>document.body.className = ((document.body.className) ? document.body.className + ' js-enabled' : 'js-enabled');</script>
  
    
<div id="nhsuk-cookie-banner" data-nosnippet="true" >
    <div class="nhsuk-cookie-banner" id="cookiebanner" style="display:none;" data-cookie-version="1" data-policy-url="/nhsbsa-digital-playbook/cookie-policy/">
        <div class="nhsuk-width-container app-width-container">
                <h2>NHSBSA Digital, Data and Technology Playbook</h2>
                    <p>We've put some small files called cookies on your device to make our site work.</p>
                    <p>We'd also like to use analytics cookies. These send anonymous information about how our site is used to a service called Google Analytics. We use this information to improve our site.</p>
                    <p>Let us know if this is OK. We'll use a cookie to save your choice across all our digital services for the next 3 calendar months. You can <a id="nhsuk-cookie-banner__link" href="/nhsbsa-digital-playbook/cookie-policy/" data-policy-url=/nhsbsa-digital-playbook/cookie-policy/">read more about our cookies</a> before you choose.</p>

            <ul>
                <li>
                    <button class='nhsuk-button' id="nhsuk-cookie-banner__link_accept_analytics" href="#">I&#39;m OK with analytics cookies</button>
                </li>
                <li>
                    <button class='nhsuk-button' id="nhsuk-cookie-banner__link_accept" href="#">Do not use analytics cookies</button>
                </li>
            </ul>
        </div>
    </div>

    <div class="nhsuk-success-banner" id="nhsuk-cookie-confirmation-banner" style="display:none;">
        <div class="nhsuk-width-container">
            <p id="nhsuk-success-banner__message">You can change your cookie settings at any time using <a id="nhsuk-cookie-banner__link" href="/nhsbsa-digital-playbook/cookie-policy/" data-policy-url=/nhsbsa-digital-playbook/cookie-policy/">our cookies page</a>.</p>
        </div>
    </div>
</div>


    <a class="nhsuk-skip-link" href="#main-content">Skip to main content</a>


    


<header class="nhsuk-header nhsuk-header--organisation" role="banner">
  
  <div class="nhsuk-header__container">
    <div class="nhsuk-header__logo nhsuk-header__logo--only">      <a class="nhsuk-header__link" href="/nhsbsa-digital-playbook/" aria-label="Business Services Authority  Digital, Data and Technology playbook homepage">  <svg class="nhsuk-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 16" height="40" width="100">
    <path class="nhsuk-logo__background" fill="#005eb8" d="M0 0h40v16H0z"></path>
    <path class="nhsuk-logo__text" fill="#fff" d="M3.9 1.5h4.4l2.6 9h.1l1.8-9h3.3l-2.8 13H9l-2.7-9h-.1l-1.8 9H1.1M17.3 1.5h3.6l-1 4.9h4L25 1.5h3.5l-2.7 13h-3.5l1.1-5.6h-4.1l-1.2 5.6h-3.4M37.7 4.4c-.7-.3-1.6-.6-2.9-.6-1.4 0-2.5.2-2.5 1.3 0 1.8 5.1 1.2 5.1 5.1 0 3.6-3.3 4.5-6.4 4.5-1.3 0-2.9-.3-4-.7l.8-2.7c.7.4 2.1.7 3.2.7s2.8-.2 2.8-1.5c0-2.1-5.1-1.3-5.1-5 0-3.4 2.9-4.4 5.8-4.4 1.6 0 3.1.2 4 .6"></path>
  </svg>

        <span class="nhsuk-organisation-name">Business Services Authority</span>
<span class="nhsuk-organisation-descriptor">Digital, Data and Technology playbook</span>      </a>    </div>
    </div>
    

</header>

<div class="nhsuk-width-container app-width-container">
    <main class="nhsuk-main-wrapper app-main-wrapper" id="main-content" role="main">
<div class="nhsuk-grid-row">
  <div class="nhsuk-width-container app-width-container">
    <div class="app-pane">
      <div class="app-pane__side-bar">
        <nav class="app-side-nav">
        <h2 class="app-side-nav__heading">Contents</h2>
        <div class="nhsbsa-nav__list">
                <ol>
                    
                    <li><a href="#logging-requirements">Logging requirements</a>
            		</li>

                    <li><a href="#security">Security</a>
            		</li>

                    <li><a href="#data-protection">Data protection</a>
            		</li>

                    <li><a href="#tools">Tools</a>
            		</li>

                    <li><a href="#logging-levels">Logging levels</a>
            		</li>

                    <li><a href="#meta-information">Meta information</a>
            		</li>

                    <li><a href="#logging-guidance">Logging Guidance</a>
            
                <ol>
                    
                    <li><a href="#content">Content</a>
            		</li>

                    <li><a href="#error-cases">Error cases</a>
            		</li>
                </ol>
            		</li>

                    <li><a href="#log-review">Log review</a>
            		</li>

                    <li><a href="#references">References</a>
            		</li>
                </ol>
            </div>
        </nav>
      </div>

      <div class="app-pane__main-content">
        <div class="nhsuk-back-link no-js">  <a class="nhsuk-back-link__link" href="javascript:history.back()">
  <svg class="nhsuk-icon nhsuk-icon__chevron-left" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" height="24" width="24">
    <path d="M8.5 12c0-.3.1-.5.3-.7l5-5c.4-.4 1-.4 1.4 0s.4 1 0 1.4L10.9 12l4.3 4.3c.4.4.4 1 0 1.4s-1 .4-1.4 0l-5-5c-.2-.2-.3-.4-.3-.7z"></path>
  </svg>
  Go back</a>
</div>

      
        <div class="nhsbsa-article-header">
          <h1 class="nhsuk-heading-xl">
            Logging
          </h1>
            <strong class="nhsuk-tag nhsuk-tag--yellow">
  REVIEW
</strong>


        </div>
      

<h2 id="logging-requirements" tabindex="-1"><a class="header-anchor" href="#logging-requirements">Logging requirements</a></h2>
<p>Understand the reason for logging within a component and write log statements appropriate to these reasons.</p>
<p>Reasons may include:</p>
<ul>
<li><strong>Application support</strong><br>
Logs can be used to track down issues in production. It should be possible to read logs and understand the flow through a programme to help track down where something may have gone wrong.</li>
<li><strong>Application monitoring</strong><br>
Logs can be monitored and used to trigger alerts when something goes wrong. Logs should be monitored for application errors and security events at a minimum. Client errors may not be actively monitored, although they should be logged.</li>
<li><strong>Application profiling</strong><br>
Logs can be used to understand how an application is behaving in production. For instance to identify bottlenecks or performance issues.</li>
<li><strong>Audit</strong><br>
Care must be taken when considering logging for audit purposes. <strong>Personally Identifiable Information must not be recorded in logs</strong>. Logs should only contain an audit of events, identified by system generated IDs. For instance:<br>
<code class="md">User: [id] logged into application: [application-a]</code></li>
<li><strong>Management information</strong><br>
Care must be taken when using logs for management information. The production database is a more accurate source of truth. However logs can provide a useful picture of how an application is behaving.</li>
</ul>
<h2 id="security" tabindex="-1"><a class="header-anchor" href="#security">Security</a></h2>
<p>Adhere to best practice secure logging techniques as defined in the <a href="https://cheatsheetseries.owasp.org/cheatsheets/Logging_Cheat_Sheet.html" target="_blank" rel="noopener">OWASP logging cheatsheet</a></p>
<p>We also use the <a href="https://www.ncsc.gov.uk/guidance/introduction-logging-security-purposes" target="_blank" rel="noopener">NCSC guidance for logging for security purposes</a></p>
<p>Logging must adhere to the <a href="https://bsa2468.atlassian.net/wiki/spaces/AR/pages/914489921/SEC-003+Protective+Monitoring+Standard" target="_blank" rel="noopener">Protective Monitoring Standard</a>. In particular, consult the security focussed monitoring standard to understand the various security events that must be logged.</p>
<h2 id="data-protection" tabindex="-1"><a class="header-anchor" href="#data-protection">Data protection</a></h2>
<p>Data used in log entries must not include Personally Identifiable Information except for internal system IDs. Logging IDs allows individuals to be identified if necessary by cross reference to a transactional data store. Access to production data stores is controlled.</p>
<p>For full guidance on use of PII, refer to <a href="../coding-securely-personal-data/">Guidance for coding with Personal Data</a>.</p>
<h2 id="tools" tabindex="-1"><a class="header-anchor" href="#tools">Tools</a></h2>
<p>We make use of logging libraries that simplify adherance to good practice:</p>
<ul>
<li>Logging standard meta data (see below)</li>
<li>Separation of log statements from output channel</li>
<li>Logging with rich data formats</li>
</ul>
<p>In Java, we use <a href="https://slf4j.org/" target="_blank" rel="noopener">Slf4J</a> as our logging API, with <a href="https://logback.qos.ch/" target="_blank" rel="noopener">Logback</a> as the logging implementation. We use the <a href="https://projectlombok.org/" target="_blank" rel="noopener">Lombok</a> <code class="md">@slf4j</code> annotation to ease creation of the logger in code.</p>
<p>In Node, we use <a href="https://www.npmjs.com/package/winston" target="_blank" rel="noopener">Winston</a> for logging.</p>
<p>We use UTF-8 encoding and output in JSON for simpler integration into <a href="https://www.datadoghq.com/" target="_blank" rel="noopener">Datadog</a>, our centralised log collation service.</p>
<h2 id="logging-levels" tabindex="-1"><a class="header-anchor" href="#logging-levels">Logging levels</a></h2>
<div class="md" class="admonition warning">
<p class="md" class="admonition-title">DEBUG</p>
<p><code class="md">DEBUG</code> output MUST NOT be enabled on production systems as this exposes the risk of logging PII from library code such as object mappers and ORM frameworks</p>
</div>
<p>The following standard logging levels should be used:</p>
<ul>
<li><code class="md">DEBUG</code> is used for development purposes only.<br>
Do not rely on DEBUG to understand any potential production issue.</li>
<li><code class="md">INFO</code> is used to present normal application flow.<br>
For example
<ul>
<li>On startup/shutdown it is helpful to log configuration properties.<br>
Secrets and sensitive data MUST NOT be logged at INFO.</li>
<li>On successful authentication</li>
<li>On creation/change of user privileges</li>
<li>On entry to/exit from the public interface to an application</li>
<li>On calls to/response from a downstream service</li>
<li>On notable business logic</li>
<li>On failed input validation (although WARN may be used instead)</li>
</ul>
</li>
<li><code class="md">WARN</code> is used to present undesirable but non-critical errors in application flow<br>
For example:
<ul>
<li>On failed authentication</li>
<li>On failed authorisation</li>
<li>On client error</li>
<li>On server error that is recoverable</li>
<li>On session management failures<br>
Events logged at WARN are candidates for monitoring so that alerts may be raised after multiple events</li>
</ul>
</li>
<li><code class="md">ERROR</code> is used to present errors in application flow that require immediate attention<br>
All events logged at ERROR should be monitored so that alerts may be raised after a single event<br>
For example:
<ul>
<li>On server error that is unrecoverable</li>
<li>On failed output validation (e.g. database failed to insert)</li>
<li>On failed application startup/shutdown</li>
</ul>
</li>
</ul>
<h2 id="meta-information" tabindex="-1"><a class="header-anchor" href="#meta-information">Meta information</a></h2>
<p>The following meta information should be logged:</p>
<ul>
<li>unique ID per log statement</li>
<li>timestamp in ISO8601 format with minimum milliseconds precision and timezone information</li>
<li>unique host identifier</li>
<li>containerised environments should uniquely identify the container</li>
<li>application/system name</li>
<li>application specific <em>category</em> e.g. class name</li>
<li>process ID</li>
<li>thread ID</li>
<li>unique request ID</li>
<li>unique correlation ID for requests that span multiple applications and services</li>
</ul>
<p>The following meta information must not be logged:</p>
<ul>
<li>client session ID<br>
Client held session IDs should not be logged, as this opens a security risk.<br>
If tracing session interactions is required, then it is permissable to log a secure hash of the session ID.</li>
</ul>
<h2 id="logging-guidance" tabindex="-1"><a class="header-anchor" href="#logging-guidance">Logging Guidance</a></h2>
<p>Never print logging information direct to ‘system output’ except through configuration of a logging library. For instance, avoid statements like this:</p>
<div class="code-tabs">
<ul>
<li><input type="radio" name="label-group-280" checked><label for="group-280-tab-0" onclick="this.previousElementSibling.click()">Java</label></li>
<li><input type="radio" name="label-group-280"><label for="group-280-tab-1" onclick="this.previousElementSibling.click()">Javascript</label></li>
</ul>
<input type="radio" id="group-280-tab-0" name="group-280" checked>
<pre class="language-java"><code class="language-java"><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"A useful log statement"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<input type="radio" id="group-280-tab-1" name="group-280">
<pre class="language-javascript"><code class="language-javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"A useful log statement"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div>
<p>Logging libraries should provide data as arguments to log messages with placeholders. This has performance benefits in languages such as Java, but more importantly it allows data to be sanitised within the library. For instance, use this form:</p>
<div class="code-tabs">
<ul>
<li><input type="radio" name="label-group-285" checked><label for="group-285-tab-0" onclick="this.previousElementSibling.click()">Java</label></li>
<li><input type="radio" name="label-group-285"><label for="group-285-tab-1" onclick="this.previousElementSibling.click()">Javascript</label></li>
</ul>
<input type="radio" id="group-285-tab-0" name="group-285" checked>
<pre class="language-java"><code class="language-java">logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"Here is some data - {}"</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<input type="radio" id="group-285-tab-1" name="group-285">
<pre class="language-javascript"><code class="language-javascript">logger<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'info'</span><span class="token punctuation">,</span> <span class="token string">'Here is some data -  %s'</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div>
<p>and avoid this form:</p>
<div class="code-tabs">
<ul>
<li><input type="radio" name="label-group-290" checked><label for="group-290-tab-0" onclick="this.previousElementSibling.click()">Java</label></li>
<li><input type="radio" name="label-group-290"><label for="group-290-tab-1" onclick="this.previousElementSibling.click()">Javascript</label></li>
</ul>
<input type="radio" id="group-290-tab-0" name="group-290" checked>
<pre class="language-java"><code class="language-java">logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"Here is some data - "</span> <span class="token operator">+</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<input type="radio" id="group-290-tab-1" name="group-290">
<pre class="language-javascript"><code class="language-javascript">logger<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'info'</span><span class="token punctuation">,</span> <span class="token string">'Here is some data - '</span> <span class="token operator">+</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div>
<h3 id="content" tabindex="-1"><a class="header-anchor" href="#content">Content</a></h3>
<p>Log entries should represent atomic events with contextual information to understand the event.</p>
<ul>
<li>It should not be necessary to cross reference one log entry with another to understand it.</li>
<li>Contextual information should include the application flow and logic that caused the event</li>
<li>Contextual information should include enough data to identify what caused the event</li>
</ul>
<p>Data used in log entries should be prefixed with a contextual keyword (e.g. <code class="md">User:</code>) and wrapped in delimiters (e.g. <code class="md">[]</code>) to facilitate parsing</p>
<ul>
<li>Depending on the capability of the logging library, delimiters may be automatically included for data items.</li>
<li>Parsing of logged data should be verified with a working example script</li>
<li>Don’t leave log parsing until its needed to resolve a live issue. A working script that parses data according to the defined delimiters will verify that the data can be parsed and used.</li>
<li>Datadog provides a <a href="https://docs.datadoghq.com/logs/log_configuration/pipelines/?tab=source" target="_blank" rel="noopener">pipeline</a> feature to allow extraction of marked up data items as metrics.</li>
</ul>
<div class="code-tabs">
<ul>
<li><input type="radio" name="label-group-340" checked><label for="group-340-tab-0" onclick="this.previousElementSibling.click()">Javascript</label></li>
<li><input type="radio" name="label-group-340"><label for="group-340-tab-1" onclick="this.previousElementSibling.click()">Javascript</label></li>
</ul>
<input type="radio" id="group-340-tab-0" name="group-340" checked>
<pre class="language-java"><code class="language-java">logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"User: [{}] successfully authenticated"</span><span class="token punctuation">,</span> user<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre>
<input type="radio" id="group-340-tab-1" name="group-340">
<pre class="language-java"><code class="language-java">logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"User: [%s] successfully authenticated"</span><span class="token punctuation">,</span> user<span class="token punctuation">.</span>id<span class="token punctuation">)</span></code></pre>
</div>
<p>Data in log statements should be placed in order of relevance to the event</p>
<ul>
<li>When reviewing log files it is very helpful to see data in priority order within a single log statement so that the most important aspect of the event is read first. For instance, you may want to search for all log events on a particular case by ID. Once that is done, the actual case ID become less relevant than the thing that happened to it.</li>
</ul>
<div class="code-tabs">
<ul>
<li><input type="radio" name="label-group-352" checked><label for="group-352-tab-0" onclick="this.previousElementSibling.click()">Javascript</label></li>
<li><input type="radio" name="label-group-352"><label for="group-352-tab-1" onclick="this.previousElementSibling.click()">Javascript</label></li>
</ul>
<input type="radio" id="group-352-tab-0" name="group-352" checked>
<pre class="language-java"><code class="language-java">logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"Changed NewState: [{}] for Case: [{}]"</span><span class="token punctuation">,</span> <span class="token keyword">case</span><span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">case</span><span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<input type="radio" id="group-352-tab-1" name="group-352">
<pre class="language-java"><code class="language-java">logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"Change NewState: [%s] for Case: [%s]"</span><span class="token punctuation">,</span> <span class="token keyword">case</span><span class="token punctuation">.</span>state<span class="token punctuation">,</span> <span class="token keyword">case</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div>
<h3 id="error-cases" tabindex="-1"><a class="header-anchor" href="#error-cases">Error cases</a></h3>
<p>Exceptions should be logged with a full stack trace</p>
<ul>
<li>Some exceptions will contain additional information that should also be logged.<br>
For example, Java SQLExceptions can contain a chain of other SQLExceptions. Ideally all of the exceptions should be logged</li>
<li>Exceptions should not be logged and then thrown.<br>
The log and throw anti-pattern creates noisy logs with duplicate log entries for a single event.</li>
<li>When throwing exceptions, the original exception cause should be passed in to allow a full stack trace to be logged at the point the exception is handled.</li>
</ul>
<p>Applications should provide a top level exception handler so that all exceptions are logged.</p>
<p>Asynchronous code must be guarded to ensure that exceptions do not propagate and break subsequent calls in the framework.</p>
<p>Known errors should be logged with a unique error code to identify them. This requires the development team to create and maintain a catalogue of known system errors and codes</p>
<div class="code-tabs">
<ul>
<li><input type="radio" name="label-group-386" checked><label for="group-386-tab-0" onclick="this.previousElementSibling.click()">Java</label></li>
<li><input type="radio" name="label-group-386"><label for="group-386-tab-1" onclick="this.previousElementSibling.click()">Javascript</label></li>
</ul>
<input type="radio" id="group-386-tab-0" name="group-386" checked>
<pre class="language-java"><code class="language-java">logger<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"[{}] OldStatus: [{}] NewStatus: [{}] disallowed for Case: [{}]"</span><span class="token punctuation">,</span> 
    <span class="token class-name">ServiceErrors</span><span class="token punctuation">.</span><span class="token constant">CASE_INVALID_STATUS_CHANGE</span><span class="token punctuation">,</span> <span class="token keyword">case</span><span class="token punctuation">.</span><span class="token function">getStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> newStatus<span class="token punctuation">,</span> <span class="token keyword">case</span><span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<input type="radio" id="group-386-tab-1" name="group-386">
<pre class="language-javascript"><code class="language-javascript">logger<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"[%s] OldStatus: [%s] NewStatus: [%s] disallowed for Case: [%s]"</span><span class="token punctuation">,</span> 
    ServiceErrors<span class="token punctuation">.</span><span class="token constant">CASE_INVALID_STATUS_CHANGE</span><span class="token punctuation">,</span> <span class="token keyword">case</span><span class="token punctuation">.</span>status<span class="token punctuation">,</span> newStatus<span class="token punctuation">,</span> <span class="token keyword">case</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div>
<h2 id="log-review" tabindex="-1"><a class="header-anchor" href="#log-review">Log review</a></h2>
<p>A review of log events must be undertaken prior to any minor release. A log review should show:</p>
<ul>
<li>Application flow is visible from reading logs alone: Do you know what’s happening from reading the logs</li>
<li>Application errors are being logged and with enough contextual information to identify the cause of the error</li>
<li>Client errors are being logged and with enough contextual information to identify the cause of the error</li>
<li>Security events are being logged</li>
</ul>
<h2 id="references" tabindex="-1"><a class="header-anchor" href="#references">References</a></h2>
<ul>
<li><a href="https://cheatsheetseries.owasp.org/cheatsheets/Logging_Cheat_Sheet.html" target="_blank" rel="noopener">OWASP logging cheatsheet</a></li>
<li><a href="https://www.ncsc.gov.uk/guidance/introduction-logging-security-purposes" target="_blank" rel="noopener">NCSC guidance for logging for security purposes</a></li>
<li><a href="https://bsa2468.atlassian.net/wiki/spaces/AR/pages/914489921/SEC-003+Protective+Monitoring+Standard" target="_blank" rel="noopener">Protective Monitoring Standard</a></li>
<li><a href="../coding-securely-personal-data/">Guidance for Coding with Personal Data</a></li>
<li><a href="https://slf4j.org/" target="_blank" rel="noopener">Slf4J</a></li>
<li><a href="https://logback.qos.ch/" target="_blank" rel="noopener">Logback</a></li>
<li><a href="https://projectlombok.org/" target="_blank" rel="noopener">Lombok</a></li>
<li><a href="https://www.npmjs.com/package/winston" target="_blank" rel="noopener">Winston</a></li>
<li><a href="https://www.datadoghq.com/" target="_blank" rel="noopener">Datadog</a></li>
</ul>

        <hr>
        <h2 class="nhsuk-heading-l header-anchor" id="improve-the-playbook">Improve the playbook</h2>
        <p>If you spot anything factually incorrect with this page or have ideas for improvement,
          please share your suggestions.</p>

        <p>Before you start, you will need a <a href="https://github.com/join?source=login" target="_blank" rel="noopener">GitHub account</a>.
        Github is an open forum where we collect feedback.</p>
        

<div class="nhsuk-action-link">
  <a class="nhsuk-action-link__link" href="https://github.com/nhsbsa/nhsbsa-digital-playbook/discussions/new?category=development&amp;template=General-Playbook-Ideas.md&amp;title=Change%20to%20page%20&#39;%2Fdevelopment%2Fcoding-logging&#39;%20" target="_blank" rel="noopener">
    <svg class="nhsuk-icon nhsuk-icon__arrow-right-circle" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" width="36" height="36">
      <path d="M0 0h24v24H0z" fill="none"></path>
      <path d="M12 2a10 10 0 0 0-9.95 9h11.64L9.74 7.05a1 1 0 0 1 1.41-1.41l5.66 5.65a1 1 0 0 1 0 1.42l-5.66 5.65a1 1 0 0 1-1.41 0 1 1 0 0 1 0-1.41L13.69 13H2.05A10 10 0 1 0 12 2z"></path>
    </svg>
    <span class="nhsuk-action-link__text">Suggest a change to this page</span>
  </a>
</div>



        <div class="nhsbsa-article--date">
    <p class="nhsuk-body-s nhsuk-u-secondary-text-color nhsuk-u-margin-bottom-0">
      Published: <time datetime="2023-09-22T07:39:21.000Z">22 September 2023</time>
    </p>
    <p class="nhsuk-body-s nhsuk-u-secondary-text-color nhsuk-u-margin-bottom-0">
      Last reviewed: <time datetime="2023-05-06T00:00:00.000Z">6 May 2023</time>
    </p>
    <p class="nhsuk-body-s nhsuk-u-secondary-text-color nhsuk-u-margin-bottom-0">
      Next review due: <time datetime="2024-05-06T00:00:00.000Z">6 May 2024</time>
    </p>
</div>


        </div>
      </div>
    </div>
  </div>

    </main>
</div>

    <footer role="contentinfo">
  <div class="nhsuk-footer-container">
    <div class="nhsuk-width-container app-width-container">
      <div class="nhsuk-footer" id="nhsuk-footer">				<h2 class="nhsuk-u-visually-hidden">Support links</h2>
				
				<ul class="nhsuk-footer__list">					<li class="nhsuk-footer__list-item nhsuk-footer-default__list-item"><a class="nhsuk-footer__list-item-link" href="/nhsbsa-digital-playbook/accessibility">Accessibility</a></li>					<li class="nhsuk-footer__list-item nhsuk-footer-default__list-item"><a class="nhsuk-footer__list-item-link" href="https://www.nhsbsa.nhs.uk/contact-us" target="_blank" rel="noopener">Contact us</a></li>					<li class="nhsuk-footer__list-item nhsuk-footer-default__list-item"><a class="nhsuk-footer__list-item-link" href="/nhsbsa-digital-playbook/cookie-policy/">Cookies</a></li>					<li class="nhsuk-footer__list-item nhsuk-footer-default__list-item"><a class="nhsuk-footer__list-item-link" href="https://github.com/nhsbsa/nhsbsa-digital-playbook" target="_blank" rel="noopener">GitHub</a></li>				</ul>
        <p class="nhsuk-footer__copyright">&copy; Crown copyright</p>
      </div>
			<div class="nhsuk-ogl-footer">
				<p class="nhsuk-ogl-footer--text">
				<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 483.2 195.7" height="17" width="41" focusable="false">
				<path fill="currentColor" d="M421.5 142.8V.1l-50.7 32.3v161.1h112.4v-50.7zm-122.3-9.6A47.12 47.12 0 0 1 221 97.8c0-26 21.1-47.1 47.1-47.1 16.7 0 31.4 8.7 39.7 21.8l42.7-27.2A97.63 97.63 0 0 0 268.1 0c-36.5 0-68.3 20.1-85.1 49.7A98 98 0 0 0 97.8 0C43.9 0 0 43.9 0 97.8s43.9 97.8 97.8 97.8c36.5 0 68.3-20.1 85.1-49.7a97.76 97.76 0 0 0 149.6 25.4l19.4 22.2h3v-87.8h-80l24.3 27.5zM97.8 145c-26 0-47.1-21.1-47.1-47.1s21.1-47.1 47.1-47.1 47.2 21 47.2 47S123.8 145 97.8 145"></path>
				</svg>
				All content is available under the <a class="nhsuk-footer__list-item-link" href="https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/" rel="noopener" target="_blank">Open Government Licence v3.0</a>, except where otherwise stated.
				</p>
			</div>
    </div>
  </div>
</footer>

    <script src="/nhsbsa-digital-playbook/javascripts/nhsuk.min.js?v=c25341999277"></script>
    <script src="/nhsbsa-digital-playbook/javascripts/application.js?v=13016328ce1d"></script>
    <script src="/nhsbsa-digital-playbook/javascripts/cookie-banner.js?v=d12e888d2db3"></script>

</body>
</html>
