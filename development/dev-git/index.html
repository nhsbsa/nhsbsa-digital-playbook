<!DOCTYPE html><html lang="en">

<head>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="Define how your team use Git to avoid confusion and reduce risk">
  <meta name="robots" content="noindex">
  
  <title>
Git - NHSBSA Digital, Data and Technology Playbook - NHSBSA
  </title>

    
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-NQ562NM01Z" type="text/plain" data-cookieconsent="statistics"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-NQ562NM01Z');
    </script>

  
  <link href="https://assets.nhs.uk/" rel="preconnect" crossorigin>
  <link type="font/woff2" href="https://assets.nhs.uk/fonts/FrutigerLTW01-55Roman.woff2" rel="preload" as="font" crossorigin>
  <link type="font/woff2" href="https://assets.nhs.uk/fonts/FrutigerLTW01-65Bold.woff2" rel="preload" as="font" crossorigin>

  
  <link rel="shortcut icon" href="/nhsbsa-digital-playbook/nhsuk-frontend/assets/favicons/favicon.ico?v=68c7f017cfba" type="image/x-icon">
  <link rel="apple-touch-icon" href="/nhsbsa-digital-playbook/nhsuk-frontend/assets/favicons/apple-touch-icon-180x180.png?v=15a5044def06">
  <link rel="mask-icon" href="/nhsbsa-digital-playbook/nhsuk-frontend/assets/favicons/favicon.svg" color="#005eb8">
  <link rel="icon" sizes="192x192" href="/nhsbsa-digital-playbook/nhsuk-frontend/assets/favicons/favicon-192x192.png?v=43924bfe6c7e">

  <meta name="msapplication-TileImage" content="/nhsbsa-digital-playbook/nhsuk-frontend/assets/favicons/mediumtile-144x144.png?v=cf4985872492">
  <meta name="msapplication-TileColor" content="#005eb8">
  <meta name="msapplication-square70x70logo" content="/nhsbsa-digital-playbook/nhsuk-frontend/assets/favicons/smalltile-70x70.png?v=29f75b06cf75">
  <meta name="msapplication-square150x150logo" content="/nhsbsa-digital-playbook/nhsuk-frontend/assets/favicons/mediumtile-150x150.png?v=89688d93af5b">
  <meta name="msapplication-wide310x150logo" content="/nhsbsa-digital-playbook/nhsuk-frontend/assets/favicons/widetile-310x150.png?v=535c3996630d">
  <meta name="msapplication-square310x310logo" content="/nhsbsa-digital-playbook/nhsuk-frontend/assets/favicons/largetile-310x310.png?v=294742e00ff4">

  <meta property="og:url" content="https://nhsbsa.github.io/nhsbsa-digital-playbook/development/dev-git/">
  <meta property="og:site_name" content="nhsbsa.nhs.uk">
  <meta property="og:description" content="Define how your team use Git to avoid confusion and reduce risk">
  <meta property="og:type" content="website">
  <meta property="og:locale" content="en_GB">
  <meta property="og:image" content="https://nhsbsa.github.io/nhsbsa-digital-playbook/images/opengraph-image.png?v=b6b84e727630">
  <meta property="og:title" content="Git - NHSBSA Digital, Data and Technology Playbook - NHSBSA">

  <link href="/nhsbsa-digital-playbook/stylesheets/application.css?v=af419bcfaebd" media="all" rel="stylesheet" type="text/css" >

</head>

<body class="">

  <script>document.body.className = ((document.body.className) ? document.body.className + ' js-enabled' : 'js-enabled');</script>

    
<div id="nhsuk-cookie-banner" data-nosnippet="true" >
    <div class="nhsuk-cookie-banner" id="cookiebanner" style="display:none;" data-cookie-version="1" data-policy-url="/nhsbsa-digital-playbook/cookie-policy/">
        <div class="nhsuk-width-container app-width-container">
                <h2>NHSBSA Digital, Data and Technology Playbook</h2>
                    <p>We've put some small files called cookies on your device to make our site work.</p>
                    <p>We'd also like to use analytics cookies. These send anonymous information about how our site is used to a service called Google Analytics. We use this information to improve our site.</p>
                    <p>Let us know if this is OK. We'll use a cookie to save your choice across all our digital services for the next 3 calendar months. You can <a id="nhsuk-cookie-banner__link" href="/nhsbsa-digital-playbook/cookie-policy/" data-policy-url=/nhsbsa-digital-playbook/cookie-policy/">read more about our cookies</a> before you choose.</p>

            <ul>
                <li>
                    <button class='nhsuk-button' id="nhsuk-cookie-banner__link_accept_analytics" href="#">I&#39;m OK with analytics cookies</button>
                </li>
                <li>
                    <button class='nhsuk-button' id="nhsuk-cookie-banner__link_accept" href="#">Do not use analytics cookies</button>
                </li>
            </ul>
        </div>
    </div>

    <div class="nhsuk-success-banner" id="nhsuk-cookie-confirmation-banner" style="display:none;">
        <div class="nhsuk-width-container">
            <p id="nhsuk-success-banner__message">You can change your cookie settings at any time using <a id="nhsuk-cookie-banner__link" href="/nhsbsa-digital-playbook/cookie-policy/" data-policy-url=/nhsbsa-digital-playbook/cookie-policy/">our cookies page</a>.</p>
        </div>
    </div>
</div>


    <a class="nhsuk-skip-link" href="#main-content">Skip to main content</a>


    


<header class="nhsuk-header nhsuk-header--organisation" role="banner">
  
  <div class="nhsuk-header__container">
    <div class="nhsuk-header__logo nhsuk-header__logo--only">      <a class="nhsuk-header__link" href="/nhsbsa-digital-playbook/" aria-label="Business Services Authority  Digital, Data and Technology playbook homepage">  <svg class="nhsuk-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 16" height="40" width="100">
    <path class="nhsuk-logo__background" fill="#005eb8" d="M0 0h40v16H0z"></path>
    <path class="nhsuk-logo__text" fill="#fff" d="M3.9 1.5h4.4l2.6 9h.1l1.8-9h3.3l-2.8 13H9l-2.7-9h-.1l-1.8 9H1.1M17.3 1.5h3.6l-1 4.9h4L25 1.5h3.5l-2.7 13h-3.5l1.1-5.6h-4.1l-1.2 5.6h-3.4M37.7 4.4c-.7-.3-1.6-.6-2.9-.6-1.4 0-2.5.2-2.5 1.3 0 1.8 5.1 1.2 5.1 5.1 0 3.6-3.3 4.5-6.4 4.5-1.3 0-2.9-.3-4-.7l.8-2.7c.7.4 2.1.7 3.2.7s2.8-.2 2.8-1.5c0-2.1-5.1-1.3-5.1-5 0-3.4 2.9-4.4 5.8-4.4 1.6 0 3.1.2 4 .6"></path>
  </svg>

        <span class="nhsuk-organisation-name">Business Services Authority</span>
<span class="nhsuk-organisation-descriptor">Digital, Data and Technology playbook</span>      </a>    </div>
    </div>
    

</header>

<div class="nhsuk-width-container app-width-container">
    <main class="nhsuk-main-wrapper app-main-wrapper" id="main-content" role="main">
<div class="nhsuk-grid-row">
  <div class="nhsuk-width-container app-width-container">
    <div class="app-pane">
      <div class="app-pane__side-bar">
        <nav class="app-side-nav">
        <h2 class="app-side-nav__heading">Contents</h2>
        <div class="nhsbsa-nav__list">
                <ol>
                    
                    <li><a href="#nhsbsa-mandatory-rules">NHSBSA Mandatory Rules</a>
            		</li>

                    <li><a href="#git-hosting">Git Hosting</a>
            
                <ol>
                    
                    <li><a href="#issue-trackers">Issue Trackers</a>
            		</li>
                </ol>
            		</li>

                    <li><a href="#commits">Commits</a>
            
                <ol>
                    
                    <li><a href="#clean-code">Clean code</a>
            		</li>

                    <li><a href="#logical-commits">Logical commits</a>
            		</li>

                    <li><a href="#commit-frequency">Commit frequency</a>
            		</li>

                    <li><a href="#squashing">Squashing</a>
            		</li>

                    <li><a href="#conventional-commits">Conventional Commits</a>
            		</li>
                </ol>
            		</li>

                    <li><a href="#branching-strategy">Branching Strategy</a>
            		</li>

                    <li><a href="#merging">Merging</a>
            
                <ol>
                    
                    <li><a href="#promoting-left-to-right">Promoting left to right</a>
            		</li>

                    <li><a href="#aligning-right-to-left">Aligning right to left</a>
            		</li>

                    <li><a href="#shared-branches">Shared branches</a>
            		</li>
                </ol>
            		</li>

                    <li><a href="#rebasing">Rebasing</a>
            
                <ol>
                    
                    <li><a href="#rebase-or-merge">Rebase or merge</a>
            		</li>

                    <li><a href="#forced-pushes">Forced pushes</a>
            		</li>
                </ol>
            		</li>

                    <li><a href="#git-configuration">Git configuration</a>
            		</li>

                    <li><a href="#controls">Controls</a>
            		</li>

                    <li><a href="#learn-more">Learn more</a>
            		</li>
                </ol>
            </div>
        </nav>
      </div>

      <div class="app-pane__main-content">
        <div class="nhsuk-back-link no-js">  <a class="nhsuk-back-link__link" href="javascript:history.back()">
  <svg class="nhsuk-icon nhsuk-icon__chevron-left" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" height="24" width="24">
    <path d="M8.5 12c0-.3.1-.5.3-.7l5-5c.4-.4 1-.4 1.4 0s.4 1 0 1.4L10.9 12l4.3 4.3c.4.4.4 1 0 1.4s-1 .4-1.4 0l-5-5c-.2-.2-.3-.4-.3-.7z"></path>
  </svg>
  Go back</a>
</div>

      
        <div class="nhsbsa-article-header">
          <h1 class="nhsuk-heading-xl">
            Git
          </h1>
            <strong class="nhsuk-tag nhsuk-tag--yellow">
  REVIEW
</strong>


        </div>
      

<p>Git is a distributed version control system used to track changes in source code. It allows developers to collaborate on projects by managing different versions of the same files, creating branches for new features, before merging changes into software releases.</p>
<p>Git is built on simple and elegant principles that support independent work in an offline, local environment. Git hosting providers such as Gitlab, Github and Azure enhance the collaborative experience with features such as code review, and continuous integration and deployment build pipelines.</p>
<p>The command line interface to Git is notoriously unintuitive with inconsistent terminiology and arcane flags that change behaviour in unexpected ways. This often leads to users either knowing just enough to get by, or becoming experts that with strong opinions on topics such as keeping a clean commit history. This page provides key guidance to teams so that they may use Git to their best advantage.</p>
<p>Our <a href="#learn-more">suggested learning resources</a> provide additional support for beginner and expert Git users.</p>
<h2 id="nhsbsa-mandatory-rules" tabindex="-1"><a class="header-anchor" href="#nhsbsa-mandatory-rules">NHSBSA Mandatory Rules</a></h2>
<p>Teams should be self directing and adopt tools and processes to fit their circumstances, however we have these non-negotiable standards that must be adhered to:</p>
<ul>
<li><strong>Project documentation</strong><br>
All projects must document their git conventions, including their <a href="#branching-strategy">branching strategy</a> and <a href="#controls">controls</a>. Changes from the standard approaches defined here must be held as decision records with a rationale for any deviation.</li>
<li><strong>Main is production</strong><br>
The <code class="md">main</code> branch must always reflect the current release, running in production. Keeping <code class="md">main</code> as production makes it easier to hotfix urgent changes, such as fixing zero-day exploits. Merges into main must be fast-forward only (using the flag <code class="md">ff-only</code>). This will prevent merges if there are any divergences between the commit histories of the source branch being merged and <code class="md">main</code>. If <code class="md">main</code> has progressed ahead of the source branch, the difference must be resolved and tested in the source branch before merging into main. This keeps the history of <code class="md">main</code> clean by avoiding any complex merge commits.</li>
<li><strong>Change attribution</strong><br>
Code changes must contain the <a href="#git-configuration">author</a> and <a href="#conventional-commits">issue tracker ID</a>.</li>
<li><strong>Release by SemVer Tag</strong><br>
Released versions of code must be identified by a Git tag on the commit that was quality assured. Release tags must follow the <a href="https://semver.org/spec/v2.0.0.html" target="_blank" rel="noopener">Semantic Versioning standard 2.0.0</a>. Pre-release semantic versions must not be released into production.</li>
<li><strong>Assure quality before release</strong><br>
Before a codebase is tagged for release, it must be assured as meeting requirements:
<ul>
<li><a href="../coding-peer-review/">Peer review</a></li>
<li><a href="../coding-quality-assurance/">Quality assurance</a></li>
<li><a href="../../testing/test-frameworks/">Testing</a></li>
</ul>
</li>
<li><strong>Binary dependencies are not held in source control</strong><br>
Use package managers to declare dependencies, and resolve binaries within the build. Package descriptors also enable tool to check for downstream vulnerabilities and licence compliance.</li>
</ul>
<h2 id="git-hosting" tabindex="-1"><a class="header-anchor" href="#git-hosting">Git Hosting</a></h2>
<p>The primary Git hosting provider at the NHSBSA is <a href="https://gitlab.com/nhsbsa" target="_blank" rel="noopener">Gitlab.com</a> although some teams use Github or Azure Repositories.</p>
<p>Access to Gitlab is controlled via Azure Entra ID and requested via Service Desk.</p>
<h3 id="issue-trackers" tabindex="-1"><a class="header-anchor" href="#issue-trackers">Issue Trackers</a></h3>
<p>Git hosting providers often integrate with issue tracking services. Use commit messages to automatically post updates or transition tickets:</p>
<details class="nhsuk-details"><summary class="nhsuk-details__summary"><span class="nhsuk-details__summary-text">Gitlab to Jira</span></summary>
<div class="nhsuk-details__text">
<ul>
<li><a href="https://docs.gitlab.com/ee/integration/jira/" target="_blank" rel="noopener">Gitlab Jira integration</a><br>
On Merge Request creation, a Jira ticket ID in the branch name, commit message or MR title will link the ticket to the MR</li>
</ul>
</div></details>
<h2 id="commits" tabindex="-1"><a class="header-anchor" href="#commits">Commits</a></h2>
<p>A Commit records the changes made to files in a codebase. The message attached to a commit should clearly communicate what changed and why. A well written commit message will help people to understand a codebase, as modern IDEs can display commit information alongside each line of code.</p>
<h3 id="clean-code" tabindex="-1"><a class="header-anchor" href="#clean-code">Clean code</a></h3>
<p>Well written commit messages support clean code. For instance, they remove the motivation for these anti-patterns:</p>
<ul>
<li><strong>Journal comments</strong><br>
A log of changes written in every file.</li>
<li><strong>Attribution and bylines</strong><br>
Adding comments with ticket number and author diverts a reader’s attention from understanding the code as a whole. In a few months time, that change is no more important than any other.</li>
<li><strong>Commented out code</strong><br>
Leaving redundant code in the codebase, via comment blocks adds unnecessary distraction. Use the commit history if you need to revisit old code.</li>
</ul>
<h3 id="logical-commits" tabindex="-1"><a class="header-anchor" href="#logical-commits">Logical commits</a></h3>
<p>Logical commits refers organising change into well-defined, coherent units that represent a single logical change to the codebase:</p>
<ul>
<li>Each commit addresses a single concern or feature</li>
<li>The commit can be understood on its own without requiring context from other commits</li>
<li>The changes are complete enough to not break functionality</li>
<li>The commit message clearly explains what changed and why</li>
</ul>
<h3 id="commit-frequency" tabindex="-1"><a class="header-anchor" href="#commit-frequency">Commit frequency</a></h3>
<p>We recommend committing regular and often.</p>
<p>Take care not to sacrifice logical commits by committing too frequently. If you wish to commit unfinished work, then make this clear by labelling the commit as work in progress (wip), and later <a href="#squashing">squash</a> the commits.</p>
<p>Note that committing updates the ‘local’ repository stored on your development machine (for example, on your laptop or VM). To update the ‘remote’ repository on the Git hosting provider, you need to ‘push’ the changes you have committed.</p>
<p>Changes should be pushed to the remote at least daily to serve as backup.</p>
<h3 id="squashing" tabindex="-1"><a class="header-anchor" href="#squashing">Squashing</a></h3>
<p>We recommend squashing commits into logical commits prior to merge downstream. This removes unneccesary commits that can confuse, providing a clean and logical git history. Use <a href="https://www.atlassian.com/git/tutorials/rewriting-history/git-rebase" target="_blank" rel="noopener">interactive rebase</a> to take control of squashing, and the resulting commit messages.</p>
<p>Most Git hosting providers support squashing on merge. We recommend against this. Automating removes control from authors on the resulting commit message. There is a risk that detail is lost from the squashed commits, or too much needless information is included. There is a further risk that issue IDs are lost, removing audit.</p>
<p>Commits should not be squashed automatically when merging downstream and never when merging into <code class="md">main</code>. Change is only allowed into <code class="md">main</code> after it has been tested in a pre-production environment. Squashing will change the commit history, rendering the tests invalid.</p>
<h3 id="conventional-commits" tabindex="-1"><a class="header-anchor" href="#conventional-commits">Conventional Commits</a></h3>
<p>We recommend adopting <a href="https://www.conventionalcommits.org/en/v1.0.0/" target="_blank" rel="noopener">conventional commits</a> to structure commit messages.</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">></span></span>[optional scope]: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>description</span><span class="token punctuation">></span></span>

[optional body]

[optional footer(s)]</code></pre>
<ul>
<li>
<p>The commit header should contain the type of change, ticket reference and a short description.</p>
<details class="nhsuk-details"><summary class="nhsuk-details__summary"><span class="nhsuk-details__summary-text">Conventional commit types</span></summary>
<div class="nhsuk-details__text">
<ul>
<li><code class="md">build</code><br>
Changes that affect the build system or external dependencies (example scopes: maven, npm).</li>
<li><code class="md">ci</code><br>
Changes to the CI configuration files and scripts (example scopes: Gitlab-CI, Azure Devops)</li>
<li><code class="md">docs</code><br>
Documentation only changes</li>
<li><code class="md">feat</code><br>
A new feature</li>
<li><code class="md">fix</code><br>
A bug fix</li>
<li><code class="md">perf</code><br>
A code change that improves performance</li>
<li><code class="md">refactor</code><br>
A code change that neither fixes a bug nor adds a feature</li>
<li><code class="md">style</code><br>
Changes that do not affect the meaning of the code (white-space, formatting, missing semi-colons, etc). We always recommend separating formatting changes from functional changes</li>
<li><code class="md">test</code><br>
Adding missing tests or correcting existing tests</li>
</ul>
</div></details>
<pre class="language-text"><code class="language-text">feat: LIS-123 adds back button</code></pre>
</li>
<li>
<p>The optional body should contain details of specific changes if required</p>
</li>
<li>
<p>The optional footer should contain <a href="https://git-scm.com/docs/git-interpret-trailers" target="_blank" rel="noopener">git-trailer</a> formatted meta-information</p>
</li>
</ul>
<h2 id="branching-strategy" tabindex="-1"><a class="header-anchor" href="#branching-strategy">Branching Strategy</a></h2>
<p>A branching strategy is a set of rules to manage and organize code changes in a Git system. A strategy helps to:</p>
<ul>
<li>Prevent conflicts: Avoid merge conflicts that can occur when multiple people work on the same project at the same time</li>
<li>Increase productivity: Allow the team to work on different features simultaneously</li>
<li>Reduce version management time: Help teams to manage release of code more efficiently</li>
</ul>
<p>There are <a href="https://graphite.dev/guides/git-branching-strategies" target="_blank" rel="noopener">many Git branching strategies</a> including:</p>
<ul>
<li>Git-flow</li>
<li>GitHub-flow</li>
<li>Trunk Based Development</li>
</ul>
<p>We recommend using our <a href="../dev-git-branching-strategy/">standard branching strategy</a>, based on git-flow.</p>
<h2 id="merging" tabindex="-1"><a class="header-anchor" href="#merging">Merging</a></h2>
<p>Consider the direction of flow for code change:</p>
<ul>
<li><em>Left</em> or <em>Upstream</em> is the source of change such as a feature branch</li>
<li><em>Right</em> or <em>Downstream</em> is the target of change, ultimately Production</li>
</ul>
<h3 id="promoting-left-to-right" tabindex="-1"><a class="header-anchor" href="#promoting-left-to-right">Promoting left to right</a></h3>
<p>The normal direction of flow for change is left to right: A developer creates a feature branch to make a change. The change is promoted to a release candidate branch and then merged into the production, <code class="md">main</code> branch.</p>
<ul>
<li>Promoting code must always be merged via a <a href="../coding-peer-review">peer review process</a></li>
<li>Ensure promoted code is clean with few, logical commits</li>
<li>Favour fast forward merge over merge commits</li>
</ul>
<h3 id="aligning-right-to-left" tabindex="-1"><a class="header-anchor" href="#aligning-right-to-left">Aligning right to left</a></h3>
<p>Often a branch of code will fall behind the downstream code on the right, especially when working in larger teams. This <em>divergence</em> of code should be resolved prior to promoting.</p>
<ul>
<li>Aligning downstream code should be merged locally</li>
<li>Favour rebase over merge commit. A merge commit when aligning downstream code will result in a complicated Git graph, which is difficult to keep tidy</li>
<li>Favour squashing commits to a small number before rebasing against downstream code. Fewer commits will mean fewer merge conflicts to resolve.</li>
</ul>
<h3 id="shared-branches" tabindex="-1"><a class="header-anchor" href="#shared-branches">Shared branches</a></h3>
<p>We recommend against using shared branches between collaborators. Prefer author specific branches, with peer-reviewed merges.</p>
<ul>
<li>Shared branches miss the review step between collaborators</li>
<li>There is increased chance of merge commits and complex Git history when pulling divergent changes. See <a href="git-configuration">Git configuration</a> for controlling pull behaviour.</li>
</ul>
<h2 id="rebasing" tabindex="-1"><a class="header-anchor" href="#rebasing">Rebasing</a></h2>
<p>Rebasing is a way to tidy up the Git commit history. It involves rewriting commits for a mix of purposes:</p>
<ul>
<li>Fixing merge conflicts: Rebasing can alter changes in a branch to avoid conflict with changes in another branch.</li>
<li>Cleaning up project history: Rebasing can create a cleaner project history by combining multiple commits into one.</li>
<li>Editing commit messages: Rebasing can be used to edit previous commit messages.</li>
<li>Deleting or reverting commits: Rebasing can be used to delete or revert commits that are no longer necessary</li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Rebase needs team consensus</p>
<p>Rebasing will change the Git commit graph and has potential to create an inconsistent repository that is difficult to recover from. Rebase with caution and consult your professional lead if you are unsure of what you are doing.</p>
<p>Whenever a shared branch is rebased, the entire team must be notified. Every team member will need to reset their local branch to the rewritten remote:</p>
<p>e.g.</p>
<pre class="language-bash"><code class="language-bash"><span class="token function">git</span> fetch <span class="token parameter variable">--all</span>
<span class="token function">git</span> reset <span class="token parameter variable">--hard</span> <span class="token operator">&lt;</span>branch<span class="token operator">></span> origin/<span class="token operator">&lt;</span>branch<span class="token operator">></span></code></pre>
</div>
<h3 id="rebase-or-merge" tabindex="-1"><a class="header-anchor" href="#rebase-or-merge">Rebase or merge</a></h3>
<p>We recommend that teams rebase their branches against the downstream branch whenever they diverge. This provides a more streamlined and understandable git history, and simplifies squashing.</p>
<p>Using a merge commit from an downstream branch makes squashing and reverting change more difficult.</p>
<p>We also advise squashing unecessary commits before a rebase. This simplifies conflict resolution.</p>
<h3 id="forced-pushes" tabindex="-1"><a class="header-anchor" href="#forced-pushes">Forced pushes</a></h3>
<p>Sometime we need to overwrite a branch with a re-written Git history. Be very careful when force-pushing a shared branch. Ensure that every team member understands how to resolve their local repository against a force-pushed remote branch.</p>
<p>Use <code class="md">force-with-lease</code> as a safer way to force push:</p>
<pre class="language-bash"><code class="language-bash"><span class="token function">git</span> push --force-with-lease</code></pre>
<h2 id="git-configuration" tabindex="-1"><a class="header-anchor" href="#git-configuration">Git configuration</a></h2>
<p>Ensure your local Git configuration is correct.</p>
<ul>
<li>
<p><strong>Identity</strong><br>
Ensure that your committer identity (name and email) is the same as your Git hosting provider identity (Gitlab, Github, Azure).<br>
We endeavour to Open Source our code which will bring commit identities into the public realm. You may choose to remain anonymous by using a ‘cipher’ identity and email address.</p>
</li>
<li>
<p><strong>Pull</strong><br>
Avoid merge commits on pull by setting the <code class="md">pull.rebase</code> configuration option:</p>
<pre class="language-bash"><code class="language-bash"><span class="token function">git</span> config <span class="token parameter variable">--global</span> pull.rebase <span class="token boolean">true</span></code></pre>
</li>
<li>
<p><strong>autocrlf</strong><br>
Windows users should configure <code class="md">autocrlf</code> to <code class="md">true</code> to convert unix line endings (LF) to Windows on checkout and commit.<br>
Our standard is to store unix style line endings in Git.</p>
<pre class="language-bash"><code class="language-bash"><span class="token function">git</span> config <span class="token parameter variable">--global</span> core.autocrlf <span class="token boolean">true</span></code></pre>
</li>
<li>
<p><strong>Git alias</strong><br>
Optimise Git usage by providing aliases to complex or frequent git commands.</p>
<details class="nhsuk-details"><summary class="nhsuk-details__summary"><span class="nhsuk-details__summary-text">Suggested alias configuration:</span></summary>
<div class="nhsuk-details__text">
<pre class="language-text"><code class="language-text">[alias]
  br=branch
  co=checkout
  cp=cherry-pick
  lg=log --graph --abbrev-commit --decorate --format=format:'%C(bold blue)%h%C(reset) - %C(bold green)(%ar)%C(reset) %C(white)%s%C(reset) %C(dim white)- %an%C(reset)%C(bold yellow)%d%C(reset)'
  pf=push --force-with-lease
  so=show --pretty='parent %Cred%p%Creset commit %Cred%h%Creset%C(yellow)%d%Creset%n%n%w(72,2,2)%s%n%n%w(72,0,0)%C(cyan)%an%Creset %Cgreen%ar%Creset'</code></pre>
</div></details>
</li>
<li>
<p><strong>.gitignore</strong><br>
Every repository must define a <code class="md">.gitignore</code> file to avoid commit of build artefacts, IDE configuration and local development files.<br>
Our <a href="https://gitlab.com/nhsbsa/libraries/nhsbsa-standard-files" target="_blank" rel="noopener">standard files repository</a> contains an example covering most use cases.</p>
</li>
</ul>
<h2 id="controls" tabindex="-1"><a class="header-anchor" href="#controls">Controls</a></h2>
<p>Git repository hosting providers support adding controls on what can be done with a hosted Git repository. These must be configured to protect the branch and release process.</p>
<ul>
<li>Prevent unauthorised push to production and release branches</li>
<li>Prevent unapproved merge of code into the release process</li>
<li>Prevent non-compliant commits and branch names</li>
</ul>
<details class="nhsuk-details"><summary class="nhsuk-details__summary"><span class="nhsuk-details__summary-text">Gitlab configuration</span></summary>
<div class="nhsuk-details__text">
<ul>
<li>Under <code class="md">Settings</code> &gt; <code class="md">Repository</code> &gt; <code class="md">Protected branches</code>:
<ul>
<li>Protect named <code class="md">main</code> branch, and wildcard <code class="md">develop*</code> and <code class="md">hotfix*</code></li>
<li>Allowed to merge: <code class="md">Developers</code> and <code class="md">Maintainers</code></li>
<li>Allowed to push and merge: <code class="md">No-one</code></li>
<li>Allowed to force push: <code class="md">No</code></li>
</ul>
</li>
<li>Under <code class="md">Settings</code> &gt; <code class="md">Repository</code> &gt; <code class="md">Branch rules</code>:
<ul>
<li>Add rule for <code class="md">All protected branches</code></li>
<li>Add approval rule</li>
<li>Required approvals at <code class="md">1</code> as a minimum. Projects may choose more approvers.</li>
</ul>
</li>
<li>Under <code class="md">Settings</code> &gt; <code class="md">Repository</code> &gt; <code class="md">Push rules</code>:
<ul>
<li>Check: <code class="md">Reject unverified users</code></li>
<li>Check: <code class="md">Check whether the commit author is a GitLab user</code></li>
<li>Branch Name: <code class="md">([A-Z]{3,4})-|develop-|hotfix-|NO-JIRA-|main)</code></li>
</ul>
</li>
<li>Under <code class="md">Settings</code> &gt; <code class="md">Merge requests</code>
<ul>
<li>Merge method: <code class="md">Fast-forward merge</code></li>
<li>Merge checks:
<ul>
<li>Checked: <code class="md">Pipelines must succeed</code></li>
<li>Checked: <code class="md">All threads must be resolved</code></li>
</ul>
</li>
<li>Merge request approvals
<ul>
<li>Checked: <code class="md">Prevent approval by author</code></li>
<li>Checked: <code class="md">Prevent editing approval rules in merge requests</code></li>
<li>When a commit is added: <code class="md">Remove all approvals</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div></details>
<h2 id="learn-more" tabindex="-1"><a class="header-anchor" href="#learn-more">Learn more</a></h2>
<ul>
<li><a href="https://git-scm.com/doc" target="_blank" rel="noopener">Official Git documentation</a></li>
<li><a href="https://bsa2468.atlassian.net/wiki/spaces/CPD/pages/1690435723/An+introduction+to+Git" target="_blank" rel="noopener">NHSBSA introduction to Git</a></li>
<li><a href="https://bsa2468.atlassian.net/wiki/spaces/KB/pages/861667427/Git+Cheat+Sheet" target="_blank" rel="noopener">NHSBSA Git cheatsheet</a></li>
<li><a href="https://www.baeldung.com/ops/git-guide" target="_blank" rel="noopener">Baeldung Git for Beginners: The Definitive Practical Guide</a></li>
<li><a href="https://learngitbranching.js.org/" target="_blank" rel="noopener">Learn Git Branching</a></li>
<li><a href="https://github.com/eficode-academy/git-katas" target="_blank" rel="noopener">Git Katas</a></li>
<li><a href="https://www.atlassian.com/git/tutorials/rewriting-history/git-rebase" target="_blank" rel="noopener">Atlassian on Git rebase</a></li>
<li><a href="https://gitimmersion.com/" target="_blank" rel="noopener">Git immersion</a></li>
</ul>
        <h2 class="nhsuk-heading-l">
          Related articles
        </h2>
        	<ul class="nhsuk-grid-row nhsuk-card-group">
		<li class="nhsuk-grid-column-one-third nhsuk-card-group__item">
			<div class="nhsuk-card nhsuk-card--clickable">
				<div class="nhsuk-card__content">
					<div class="nhsuk-card__header">
						<h2 class="nhsuk-card__heading nhsuk-heading-m">
							<a class="nhsuk-card__link" href="/nhsbsa-digital-playbook/development/dev-git-branching-strategy/">Git branching strategy</a>
						</h2>
						  <strong class="nhsuk-tag nhsuk-tag--yellow">
  REVIEW
</strong>


					</div>
					<p class="nhsuk-card__description">A branching strategy provides structure for pushing changes through to production</p>
					<time class="nhsuk-body-s nhsuk-u-secondary-text-color nhsuk-u-margin-top-5 nhsuk-u-margin-bottom-0" datetime="2025-04-15T09:49:28.000Z">15 April 2025</time>	
				</div>
			</div>
		</li>
	</ul>


        <hr>
        <h2 class="nhsuk-heading-l header-anchor" id="improve-the-playbook">Improve the playbook</h2>
        <p>If you spot anything factually incorrect with this page or have ideas for improvement,
          please share your suggestions.</p>

        <p>Before you start, you will need a <a href="https://github.com/join?source=login" target="_blank" rel="noopener">GitHub account</a>.
        Github is an open forum where we collect feedback.</p>
        

<div class="nhsuk-action-link">
  <a class="nhsuk-action-link__link" href="https://github.com/nhsbsa/nhsbsa-digital-playbook/discussions/new?category=development&amp;template=General-Playbook-Ideas.md&amp;title=Change%20to%20page%20&#39;%2Fdevelopment%2Fdev-git&#39;%20" target="_blank" rel="noopener">
    <svg class="nhsuk-icon nhsuk-icon__arrow-right-circle" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" width="36" height="36">
      <path d="M0 0h24v24H0z" fill="none"></path>
      <path d="M12 2a10 10 0 0 0-9.95 9h11.64L9.74 7.05a1 1 0 0 1 1.41-1.41l5.66 5.65a1 1 0 0 1 0 1.42l-5.66 5.65a1 1 0 0 1-1.41 0 1 1 0 0 1 0-1.41L13.69 13H2.05A10 10 0 1 0 12 2z"></path>
    </svg>
    <span class="nhsuk-action-link__text">Suggest a change to this page</span>
  </a>
</div>



        <div class="nhsbsa-article--date">
    <p class="nhsuk-body-s nhsuk-u-secondary-text-color nhsuk-u-margin-bottom-0">
      Published: <time datetime="2025-04-15T09:49:28.000Z">15 April 2025</time>
    </p>
    <p class="nhsuk-body-s nhsuk-u-secondary-text-color nhsuk-u-margin-bottom-0">
      Last reviewed: <time datetime="2025-03-20T00:00:00.000Z">20 March 2025</time>
    </p>
    <p class="nhsuk-body-s nhsuk-u-secondary-text-color nhsuk-u-margin-bottom-0">
      Next review due: <time datetime="2026-03-20T00:00:00.000Z">20 March 2026</time>
    </p>
</div>


        </div>
      </div>
    </div>
  </div>

    </main>
</div>

    <footer role="contentinfo">
  <div class="nhsuk-footer-container">
    <div class="nhsuk-width-container app-width-container">
      <div class="nhsuk-footer" id="nhsuk-footer">				<h2 class="nhsuk-u-visually-hidden">Support links</h2>
				
				<ul class="nhsuk-footer__list">					<li class="nhsuk-footer__list-item nhsuk-footer-default__list-item"><a class="nhsuk-footer__list-item-link" href="/nhsbsa-digital-playbook/accessibility">Accessibility</a></li>					<li class="nhsuk-footer__list-item nhsuk-footer-default__list-item"><a class="nhsuk-footer__list-item-link" href="https://www.nhsbsa.nhs.uk/contact-us" target="_blank" rel="noopener">Contact us</a></li>					<li class="nhsuk-footer__list-item nhsuk-footer-default__list-item"><a class="nhsuk-footer__list-item-link" href="/nhsbsa-digital-playbook/cookie-policy/">Cookies</a></li>					<li class="nhsuk-footer__list-item nhsuk-footer-default__list-item"><a class="nhsuk-footer__list-item-link" href="https://github.com/nhsbsa/nhsbsa-digital-playbook" target="_blank" rel="noopener">GitHub</a></li>				</ul>
        <p class="nhsuk-footer__copyright">&copy; Crown copyright</p>
      </div>
			<div class="nhsuk-ogl-footer">
				<p class="nhsuk-ogl-footer--text">
				<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 483.2 195.7" height="17" width="41" focusable="false">
				<path fill="currentColor" d="M421.5 142.8V.1l-50.7 32.3v161.1h112.4v-50.7zm-122.3-9.6A47.12 47.12 0 0 1 221 97.8c0-26 21.1-47.1 47.1-47.1 16.7 0 31.4 8.7 39.7 21.8l42.7-27.2A97.63 97.63 0 0 0 268.1 0c-36.5 0-68.3 20.1-85.1 49.7A98 98 0 0 0 97.8 0C43.9 0 0 43.9 0 97.8s43.9 97.8 97.8 97.8c36.5 0 68.3-20.1 85.1-49.7a97.76 97.76 0 0 0 149.6 25.4l19.4 22.2h3v-87.8h-80l24.3 27.5zM97.8 145c-26 0-47.1-21.1-47.1-47.1s21.1-47.1 47.1-47.1 47.2 21 47.2 47S123.8 145 97.8 145"></path>
				</svg>
				All content is available under the <a class="nhsuk-footer__list-item-link" href="https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/" rel="noopener" target="_blank">Open Government Licence v3.0</a>, except where otherwise stated.
				</p>
			</div>
    </div>
  </div>
</footer>

<script type="module" async>import mermaid from "https://unpkg.com/mermaid@11/dist/mermaid.esm.min.mjs";mermaid.initialize({"theme":"base","themeVariables":{"background":"#f0f4f5","primaryColor":"#d8dde0","primaryTextColor":"#000","primaryBorderColor":"#212b32","secondaryColor":"#f0f4f5","secondaryTextColor":"#000","tertiaryColor":"#ffb81C","tertiaryTextColor":"#fff","noteBkgColor":"#fff9c4","noteTextColor":"#000","lineColor":"#212b32","errorBkgColor":"#d5281b","errorTextColor":"#d5281b","git0":"#005eb8","git1":"#007f3b","git2":"#ffb81C","git3":"#ffeb3b","git4":"#d5281b","git5":"#7C2855","git6":"#330072","git7":"#212b32","gitBranchLabel0":"#fff","gitBranchLabel1":"#fff","gitBranchLabel2":"#000","gitBranchLabel3":"#000","gitBranchLabel4":"#fff","gitBranchLabel5":"#fff","gitBranchLabel6":"#fff","gitBranchLabel7":"#fff"},"gitGraph":{"showCommitLabel":false},"loadOnSave":true,"startOnLoad":false});const run=()=>mermaid.run();document.addEventListener('DOMContentLoaded',run);if(document.readyState!=='loading')run();</script>    <script src="/nhsbsa-digital-playbook/javascripts/nhsuk.min.js?v=c25341999277"></script>
    <script src="/nhsbsa-digital-playbook/javascripts/application.js?v=13016328ce1d"></script>
    <script src="/nhsbsa-digital-playbook/javascripts/cookie-banner.js?v=d12e888d2db3"></script>


</body>
</html>
